{extends file=$conf->root_path|cat:"\public\main.html"} {block name=head}
<style>
    .row {
        margin-top: 40px;
        padding: 0 10px;
    }

    .clickable {
        cursor: pointer;
    }

    .panel-heading div {
        margin-top: -18px;
        font-size: 15px;
    }

    .panel-heading div span {
        margin-left: 5px;
    }

    .panel-body {
        display: none;
    }
</style>
{/block}

{block name=hero}
<div class="fh5co-parallax" style="background-image: url({$path}/img/home-image-2.jpg);"
     data-stellar-background-ratio="0.5">
    <div class="overlay"></div>
    <div class="container">
        <div class="row">
            <div class="col-md-8 col-md-offset-2 col-sm-12 col-sm-offset-0 col-xs-12 col-xs-offset-0 text-center fh5co-table">
                <div class="fh5co-intro fh5co-table-cell animate-box">
                    <h1 class="text-center">? </h1>
                    <p></p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- end: fh5co-parallax -->
{/block}

{block name=top}
<div id="fh5co-team-section">
    <div class="container">
        <div class="clicked">
            <div class="row">
                <h1>Wykaz najbliższych zajęć</h1>
                <div class="row">
                    <div class="panel panel-primary">
                        <div class="panel-heading">
                            <h3 class="panel-title">Harmonogram</h3>
                            <div class="pull-right">
                                <span class="clickable filter" data-toggle="tooltip" title="Rozwiń wyszukiwarkę"
                                      data-container="body">
								<i class="glyphicon glyphicon-filter"></i>
							</span>
                            </div>
                        </div>
                        <div class="panel-body">
                            <input type="text" class="form-control" id="dev-table-filter" data-action="filter"
                                   data-filters="#dev-table" placeholder="Filtruj"
                            />
                        </div>
                        <table class="table table-hover" id="dev-table">
                            <thead>
                            <tr>
                                <th>Data</th>
                                <th>Zajecia</th>
                                <th>Trener</th>
                                <th>Akcje</th>
                            </tr>
                            </thead>
                            <tbody>

                            {foreach from=$return item=foo}
                            <tr>
                                <td>{$foo.DATE|date_format:"%d/%m/%y"}</td>
                                <td>{$foo.TYPE}</td>
                                <td>{$foo.NAME}</td>
                                <td>{if $foo.ID_PERSON eq '1'}
                                    <!--<span class="glyphicon glyphicon-ok" aria-hidden="true" style="color:#2ecc71"></span>-->
                                    <a href="?action=leave&id={$foo.ID_CLASSES}">
                                        <span class="glyphicon glyphicon-remove" aria-hidden="true" href="?action=leave"
                                              style="color:red" title="Zrezygnuj"></span>
                                    </a>
                                    {else}
                                    <a href="?action=join&id={$foo.ID_CLASSES}"><span class="glyphicon glyphicon-plus"
                                                                                      aria-hidden="true"
                                                                                      href="?action=leave"
                                                                                      style="color:greenyellow"
                                                                                      title="Zapisz się"></span></a>
                                    {/if}
                                </td>
                            </tr>
                            {/foreach}

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<?php
 print_r ($_SESSION);
?>

{/block} {block name=script}
<script>
    /**
     *   I don't recommend using this plugin on large tables, I just wrote it to make the demo useable. It will work fine for smaller tables
     *   but will likely encounter performance issues on larger tables.
     *
     *        <input type="text" class="form-control" id="dev-table-filter" data-action="filter" data-filters="#dev-table" placeholder="Filter Developers" />
     *        $(input-element).filterTable()
     *
     *    The important attributes are 'data-action="filter"' and 'data-filters="#table-selector"'
     */
    (function () {
        'use strict';
        var $ = jQuery;
        $.fn.extend({
            filterTable: function () {
                return this.each(function () {
                    $(this).on('keyup', function (e) {
                        $('.filterTable_no_results').remove();
                        var $this = $(this),
                            search = $this.val().toLowerCase(),
                            target = $this.attr('data-filters'),
                            $target = $(target),
                            $rows = $target.find('tbody tr');

                        if (search == '') {
                            $rows.show();
                        } else {
                            $rows.each(function () {
                                var $this = $(this);
                                $this.text().toLowerCase().indexOf(search) === -1 ? $this.hide() : $this.show();
                            })
                            if ($target.find('tbody tr:visible').size() === 0) {
                                var col_count = $target.find('tr').first().find('td').size();
                                var no_results = $('<tr class="filterTable_no_results"><td colspan="' + col_count + '">No results found</td></tr>')
                                $target.find('tbody').append(no_results);
                            }
                        }
                    });
                });
            }
        });
        $('[data-action="filter"]').filterTable();
    })(jQuery);

    $(function () {
        // attach table filter plugin to inputs
        $('[data-action="filter"]').filterTable();

        $('.clicked').on('click', '.panel-heading span.filter', function (e) {
            var $this = $(this),
                $panel = $this.parents('.panel');

            $panel.find('.panel-body').slideToggle();
            if ($this.css('display') != 'none') {
                $panel.find('.panel-body input').focus();
            }
        });
        $('[data-toggle="tooltip"]').tooltip();
    })

</script>
{/block}